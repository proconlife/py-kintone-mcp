# 開発ルール

本プロジェクトでは、高品質なソフトウェアを継続的に開発していくために、以下の開発ルールを定めます。

## 1. 開発手法: テスト駆動開発 (TDD) - t_wada氏の推奨に準拠

和田卓人氏が提唱するテスト駆動開発（TDD）のサイクルを基本とします。

### TDDのサイクル (Red/Green/Refactoring)

1.  **Red (失敗するテストを書く)**:
    *   これから実装する機能の仕様を明確にするために、まずその機能が満たすべき条件を表現するテストコードを書きます。
    *   このテストは、まだ機能が実装されていないため、必ず失敗することを確認します。
    *   テストコードは「動く仕様書」として機能することを意識します。

2.  **Green (テストをパスさせる最小限のコードを書く)**:
    *   Redフェーズで書いたテストをパスさせるために、必要最小限のプロダクトコードを実装します。
    *   この段階では、コードの美しさや設計の完璧さよりも、テストをパスさせることを最優先します。

3.  **Refactoring (コードをクリーンにする)**:
    *   テストがすべてパスしている状態を維持したまま、コードの内部構造を改善します。
    *   重複の排除、可読性の向上、設計の改善などを行います。
    *   このフェーズで、Martin Fowler氏のリファクタリング手法を積極的に適用します。

### TDDの目的

*   **不安のコントロール**: 小さなステップで常に動作する状態を保ち、開発の不安を軽減します。
*   **設計の改善**: テスト容易性の高いコードは、自然と疎結合で凝集度の高い設計につながります。
*   **動く仕様書**: テストコード自体が、システムの振る舞いを明確に記述するドキュメントとなります。

## 2. リファクタリング手法: Martin Fowler氏の推奨に準拠

Martin Fowler氏の著書「リファクタリング」で体系化された手法を適用し、コードの内部品質を継続的に向上させます。リファクタリングは、機能追加やバグ修正の際、またはコードの改善が必要と感じた際に、TDDのGreenフェーズ後に行います。

### 主要なリファクタリング手法のカテゴリ

*   **メソッドの構成 (Composing Methods)**:
    *   長いメソッドを短く、分かりやすくするために、`メソッドの抽出 (Extract Method)`、`メソッドのインライン化 (Inline Method)`、`説明変数の導入 (Introduce Explaining Variable)` などを適用します。

*   **オブジェクト間の責務の移動 (Moving Features Between Objects)**:
    *   責務を適切なクラスに移動させるために、`メソッドの移動 (Move Method)`、`フィールドの移動 (Move Field)`、`クラスの抽出 (Extract Class)` などを適用します。

*   **データの整理 (Organizing Data)**:
    *   データの扱いを分かりやすく、安全にするために、`フィールドの自己カプセル化 (Self Encapsulate Field)`、`マジックナンバーをシンボリック定数へ置き換える (Replace Magic Number with Symbolic Constant)` などを適用します。

*   **条件記述の単純化 (Simplifying Conditional Expressions)**:
    *   複雑な条件分岐を単純で理解しやすくするために、`条件記述の分解 (Decompose Conditional)`、`ガード節による入れ子条件記述の置き換え (Replace Nested Conditional with Guard Clauses)`、`ポリモーフィズムによる条件記述の置き換え (Replace Conditional with Polymorphism)` などを適用します。

### リファクタリングの原則

*   **テストがパスしていることを確認してから行う**: リファクタリングはコードの振る舞いを変更しないため、既存のテストがすべてパスしている状態で行います。
*   **小さなステップで頻繁に行う**: 一度に大きな変更を加えるのではなく、小さなリファクタリングを頻繁に行うことで、リスクを最小限に抑えます。
*   **継続的なプロセス**: リファクタリングは特別な作業ではなく、日々の開発活動の一部として継続的に行います。

## 3. コード品質とレビュー

*   **静的解析ツールの活用**: コードの品質を自動的にチェックするために、リンターやフォーマッターなどの静的解析ツールを導入し、CI/CDパイプラインに組み込みます。
*   **コードレビュー**: プルリクエストベースでコードレビューを実施し、品質の維持と知識の共有を図ります。

## 4. バージョン管理

*   GitフローまたはGitHubフローに準拠し、ブランチ戦略を明確にします。
*   コミットメッセージは、変更内容が明確にわかるように記述します。

## 5. ドキュメンテーション

*   `README.md` を常に最新の状態に保ち、プロジェクトの概要、セットアップ方法、使用方法などを明確に記述します。
*   APIドキュメントや設計ドキュメントは、必要に応じて作成・更新します。
